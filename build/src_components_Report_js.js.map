{"version":3,"file":"src_components_Report_js.js","mappings":"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","sources":["webpack://booking-calendar-2/./src/components/Report.js"],"sourcesContent":["import React from 'react'\r\nimport API from './custom/API'\r\nimport GenField from './custom/GenField'\r\nimport { CSVDownload } from 'react-csv'\r\nimport Loading from './custom/Loading'\r\n\r\nclass Report extends React.Component\r\n{\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state = {\r\n\t\t\tdateFrom: '',\r\n\t\t\tdateTo: '',\r\n\t\t\tstatus: '',\r\n\t\t\tcustomer: '',\r\n\t\t\tcustomers: {},\r\n\t\t\tstatusList: [],\r\n\t\t\tshowLoding: false,\r\n\t\t\tCSVDownload: '',\r\n\t\t\terrMsg: '',\r\n\t\t\tfileName: 'Online Booking - '+(new Date).getTime()\r\n\t\t}\r\n\r\n\t\tthis.setFieldValue = this.setFieldValue.bind(this)\r\n\t\tthis.formSubmitHandle = this.formSubmitHandle.bind(this)\r\n\t}\r\n\r\n\tsetFieldValue(field, value) {\r\n\t\tthis.setState({[field]: value})\r\n\t}\r\n\r\n\tformSubmitHandle(e) {\r\n\t\te.preventDefault()\r\n\r\n\t\tlet dateFrom = null\r\n\t\tlet dateTo = null\r\n\t\tif (this.state.dateFrom) {\r\n\t\t\tlet yr = this.state.dateFrom.getFullYear()\r\n\t\t\tlet mo = this.state.dateFrom.getMonth()+1\r\n\t\t\tlet day = this.state.dateFrom.getDate()\r\n\t\t\tdateFrom = yr+'-'+mo+'-'+day\r\n\t\t}\r\n\t\tif (this.state.dateTo) {\r\n\t\t\tlet yr = this.state.dateTo.getFullYear()\r\n\t\t\tlet mo = this.state.dateTo.getMonth()+1\r\n\t\t\tlet day = this.state.dateTo.getDate()\r\n\t\t\tdateTo = yr+'-'+mo+'-'+day\r\n\t\t}\r\n\r\n\t\tconst formParams = {\r\n\t\t\tdate_from: dateFrom,\r\n\t\t\tdate_to: dateTo,\r\n\t\t\tstatus: this.state.status,\r\n\t\t\tcustomer: this.state.customer\r\n\t\t}\r\n\r\n\t\tthis.setState({showLoding: true, CSVDownload: ''})\r\n\t\tAPI.post('wpcb/report_data',formParams)\r\n\t\t.then(res => {\r\n\t\t\tconst headers = res.data.headers\r\n\t\t\tconst data = res.data.data\r\n\t\t\tif (Object.values(data).length) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terrMsg: '',\r\n\t\t\t\t\tsuccessMsg: Object.values(data).length+' record(s) found.',\r\n\t\t\t\t\tCSVDownload: <CSVDownload headers={Object.values(headers)} data={Object.values(data)} filename={this.state.fileName} />\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tsuccessMsg: '',\r\n\t\t\t\t\terrMsg: 'No record(s) found.'\r\n\t\t\t\t})\r\n\t\t\t}\t\r\n\t\t\tthis.setState({showLoding: false})\t\t\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.log('Error in getting report data')\r\n\t\t\tconsole.log(err)\r\n\t\t\tthis.setState({\r\n\t\t\t\tshowLoding: false,\r\n\t\t\t\terrMsg: 'Something went wrong',\r\n\t\t\t\tsuccessMsg: ''\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setState({showLoding: true})\r\n\t\tPromise.all([\r\n\t\t\tAPI.get('wpcb/customers'),\r\n\t\t\tAPI.get('wpcb/customer_field'),\r\n\t\t\tAPI.get('wpcb/status_list')\r\n\t\t])\t\t\r\n\t\t.then(res => {\r\n\t\t\tconst customerData = res[0].data.bookings\r\n\t\t\tconst field = res[1].data\r\n\t\t\tconst statusList = res[2].data\r\n\t\t\tlet customers = []\r\n\r\n\t\t\tfor (let _data of Object.values(customerData)) {\r\n\t\t\t\tcustomers.push(_data[field.key])\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tcustomers,\r\n\t\t\t\tstatusList,\r\n\t\t\t\tshowLoding: false\r\n\t\t\t})\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tconsole.log('Error in retrieving of customers')\r\n\t\t\tconsole.log(err)\r\n\t\t\tthis.setState({showLoding: true})\r\n\t\t})\r\n\t}\r\n\t\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t{this.state.CSVDownload}\r\n\t\t\t<Loading isVisible={this.state.showLoding} />\r\n\t\t\t<div className='p-3'>\r\n\t\t\t\t<p className={'alert alert-danger '+(this.state.errMsg ? '' : 'd-none')}>\r\n\t\t\t\t\t{this.state.errMsg}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={'alert alert-success '+(this.state.successMsg ? '' : 'd-none')}>\r\n\t\t\t\t\t{this.state.successMsg}\r\n\t\t\t\t</p>\r\n\t\t\t\t<h4 className='h4'>Generate Report</h4>\r\n\t\t\t\t<form onSubmit={this.formSubmitHandle}>\r\n\t\t\t\t\t<div className='card card-body border-0 shadow'>\r\n\t\t\t\t\t\t<div className='row mb-2'>\r\n\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label className='form-label d-block'>From: </label>\r\n\t\t\t\t\t\t\t\t<GenField \r\n\t\t\t\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'date',\r\n\t\t\t\t\t\t\t\t\t\tkey: 'dateFrom',\r\n\t\t\t\t\t\t\t\t\t\tvalue: this.state.dateFrom,\r\n\t\t\t\t\t\t\t\t\t\tclass: 'form-control',\r\n\t\t\t\t\t\t\t\t\t\trequired: true\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsetFieldValue={this.setFieldValue}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className='col-12 col-md-6'>\r\n\t\t\t\t\t\t\t\t<label className='form-label d-block'>To:</label>\r\n\t\t\t\t\t\t\t\t<GenField \r\n\t\t\t\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'date',\r\n\t\t\t\t\t\t\t\t\t\tkey: 'dateTo',\r\n\t\t\t\t\t\t\t\t\t\tvalue: this.state.dateTo,\r\n\t\t\t\t\t\t\t\t\t\tclass: 'form-control'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\tsetFieldValue={this.setFieldValue}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mb-2'>\r\n\t\t\t\t\t\t\t<label className='form-label'>Status:</label>\r\n\t\t\t\t\t\t\t<GenField \r\n\t\t\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\t\t\ttype: 'select',\r\n\t\t\t\t\t\t\t\t\tkey: 'status',\r\n\t\t\t\t\t\t\t\t\tvalue: this.state.status,\r\n\t\t\t\t\t\t\t\t\tclass: 'form-select',\r\n\t\t\t\t\t\t\t\t\toptions: this.state.statusList\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsetFieldValue={this.setFieldValue}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mb-2'>\r\n\t\t\t\t\t\t\t<label className='form-label'>Customer:</label>\r\n\t\t\t\t\t\t\t<GenField \r\n\t\t\t\t\t\t\t\tfield={{\r\n\t\t\t\t\t\t\t\t\ttype: 'select',\r\n\t\t\t\t\t\t\t\t\tkey: 'customer',\r\n\t\t\t\t\t\t\t\t\tvalue: this.state.customer,\r\n\t\t\t\t\t\t\t\t\tclass: 'form-select',\r\n\t\t\t\t\t\t\t\t\toptions: this.state.customers\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tsetFieldValue={this.setFieldValue}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className='mt-2'>\r\n\t\t\t\t\t\t\t<button type='submit' className='btn btn-primary'>Generate</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Report"],"names":["React","API","GenField","CSVDownload","Loading","Report","Component","constructor","props","state","dateFrom","dateTo","status","customer","customers","statusList","showLoding","errMsg","fileName","Date","getTime","setFieldValue","bind","formSubmitHandle","field","value","setState","e","preventDefault","yr","getFullYear","mo","getMonth","day","getDate","formParams","date_from","date_to","post","then","res","headers","data","Object","values","length","successMsg","createElement","filename","catch","err","console","log","componentDidMount","Promise","all","get","customerData","bookings","_data","push","key","render","Fragment","isVisible","className","onSubmit","type","class","required","options"],"sourceRoot":""}